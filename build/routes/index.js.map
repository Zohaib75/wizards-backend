{"version":3,"sources":["../../src/routes/index.js"],"names":["express","require","router","Router","controllers","path","storage","multer","diskStorage","destination","req","file","cb","join","__dirname","filename","Date","toISOString","originalname","fileFilter","mimetype","upload","limits","fileSize","post","user","login","adminLogin","get","getAll","getAllImei","create","put","update","shop","single","addImage","deleteImage","shopAssign","getShops","fields","name","maxCount","shopVisit","tposmItem","stockItem","bwuItem","module","exports"],"mappings":"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","sourcesContent":["var express = require('express')\nvar router = express.Router()\nvar controllers = require('../controllers')\nconst path = require(\"path\");\nimport multer from 'multer';\n\nconst storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, path.join(__dirname, \"../public/uploads\"));\n    },\n    filename: function (req, file, cb) {\n        cb(null, new Date().toISOString() + file.originalname);\n    }\n});\n\nconst fileFilter = (req, file, cb) => {\n    if (file.mimetype === 'image/jpg' || file.mimetype === 'image/jpeg' || file.mimetype === 'image/png') {\n        cb(null, true);\n    }\n    else {\n        cb(null, false);\n    }\n}\nconst upload = multer({\n    storage: storage,\n    limits: {\n        fileSize: 1024 * 1024 * 5\n    },\n    fileFilter: fileFilter\n});\n\n\n//user\nrouter.post('/user/login', controllers.user.login);\nrouter.post('/admin/login', controllers.user.adminLogin);\nrouter.get('/user/:userId', controllers.user.get);\nrouter.get('/user/:page', controllers.user.getAll);\nrouter.get('/user/:userId/imei', controllers.user.getAllImei);\nrouter.post('/user', controllers.user.create);\nrouter.put('/user/:userId', controllers.user.update);\nrouter.delete('/user/:userId', controllers.user.delete);\n\n\n// shop\nrouter.get('/shop/:shopId', controllers.shop.get);\nrouter.get('/shop/:page', controllers.shop.getAll);\nrouter.post('/shop', upload.single('image'), controllers.shop.create);\nrouter.post('/shop/:shopId', controllers.shop.addImage);\nrouter.put('/shop/:shopId', controllers.shop.update);\nrouter.delete('/shop/:shopId', controllers.shop.delete);\nrouter.delete('/shop/:shopId', controllers.shop.deleteImage);\n\n// //shopAssign\nrouter.post('/assignShop', controllers.shopAssign.create);\nrouter.put('/assignShop/:id', controllers.shopAssign.update);\nrouter.get('/assignShop/:page', controllers.shopAssign.getAll);\nrouter.get('/assignShop/:userId/:day', controllers.shopAssign.getShops);\n\n// //shopVisit\nrouter.post('/visitShop', upload.fields([\n    { name: 'shopVisitImage', maxCount: 1 },\n    { name: 'tposmImageOne', maxCount: 1 },\n    { name: 'tposmImageTwo', maxCount: 1 },\n    { name: 'bwuImage', maxCount: 1 },\n    { name: 'bookImage', maxCount: 1 },\n]), controllers.shopVisit.create);\n\n// //tposmItem\nrouter.post('/tposmItem', controllers.tposmItem.create);\nrouter.put('/tposmItem/:itemId', controllers.tposmItem.update);\nrouter.delete('/tposmItem/:itemId', controllers.tposmItem.delete);\nrouter.get('/tposmItem', controllers.tposmItem.getAll);\nrouter.get('/tposmItem/:itemId', controllers.tposmItem.get);\n\n// //stockItem\nrouter.post('/stockItem', controllers.stockItem.create);\nrouter.put('/stockItem/:itemId', controllers.stockItem.update);\nrouter.delete('/stockItem/:itemId', controllers.stockItem.delete);\nrouter.get('/stockItem', controllers.stockItem.getAll);\nrouter.get('/stockItem/:itemId', controllers.stockItem.get);\n\n// //bwuItem\nrouter.post('/bwuItem', controllers.bwuItem.create);\nrouter.put('/bwuItem/:itemId', controllers.bwuItem.update);\nrouter.delete('/bwuItem/:itemId', controllers.bwuItem.delete);\nrouter.get('/bwuItem', controllers.bwuItem.getAll);\nrouter.get('/bwuItem/:itemId', controllers.bwuItem.get);\n\n\nmodule.exports = router;"],"file":"index.js"}