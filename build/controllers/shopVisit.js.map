{"version":3,"sources":["../../src/controllers/shopVisit.js"],"names":["shopVisitController","create","req","res","console","log","files","body","JSON","parse","shopVisit","shopVisitImage","filename","result","shopVisitId","dataValues","id","tposm","tposmBody","tposmImageOne","tposmImageTwo","bwu","bwuBody","bwuImage","book","bookBody","bookImage","stock","stockBody","status","json","send","module","exports"],"mappings":"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","sourcesContent":["import { shopVisit, tposm, bwu, book, stock } from '../database/models';\nvar shopVisitController = {};\n\nshopVisitController.create = async (req, res) => {\n    try {\n        console.log(req.files);\n        let body = JSON.parse(req.body.shopVisit);\n        body[\"image\"] = req.files.shopVisitImage[0].filename;\n        const result = await shopVisit.create(body);\n        let shopVisitId = result.dataValues.id;\n\n        if (req.body.tposm != null && typeof req.body.tposm != \"undefined\") {\n            let tposmBody = JSON.parse(req.body.tposm);\n            tposmBody[\"imageOne\"] = req.files.tposmImageOne[0].filename;\n            tposmBody[\"imageTwo\"] = req.files.tposmImageTwo[0].filename;\n            tposmBody[\"shopVisitId\"] = shopVisitId;\n            await tposm.create(tposmBody);\n        }\n\n        if (req.body.bwu != null && typeof req.body.bwu != \"undefined\") {\n            let bwuBody = JSON.parse(req.body.bwu);\n            bwuBody[\"shopVisitId\"] = shopVisitId;\n            bwuBody[\"image\"] = req.files.bwuImage[0].filename;\n            await bwu.create(bwuBody);\n        }\n\n        if (req.body.book != null && typeof req.body.book != \"undefined\") {\n            let bookBody = JSON.parse(req.body.book);\n            bookBody[\"shopVisitId\"] = shopVisitId;\n            bookBody[\"image\"] = req.files.bookImage[0].filename;\n\n            await book.create(bookBody);\n        }\n\n        if (req.body.stock != null && typeof req.body.stock != \"undefined\") {\n            let stockBody = JSON.parse(req.body.stock);\n            stockBody[\"shopVisitId\"] = shopVisitId;\n            await stock.create(stockBody);\n        }\n\n        res.status(200).json(result.dataValues.id);\n    }\n    catch (error) {\n        console.log(error);\n        res.status(400).send(error);\n    }\n}\n\nmodule.exports = shopVisitController;"],"file":"shopVisit.js"}